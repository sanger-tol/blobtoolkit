Changes in component 'nf-core/diamond/blastp'
'modules/nf-core/diamond/blastp/environment.yml' is unchanged
'modules/nf-core/diamond/blastp/meta.yml' is unchanged
Changes in 'diamond/blastp/main.nf':
--- modules/nf-core/diamond/blastp/main.nf
+++ modules/nf-core/diamond/blastp/main.nf
@@ -12,6 +12,7 @@
     tuple val(meta2), path(db)
     val outfmt
     val blast_columns
+    val taxid
 
     output:
     tuple val(meta), path('*.{blast,blast.gz}'), optional: true, emit: blast
@@ -31,6 +32,7 @@
     def prefix = task.ext.prefix ?: "${meta.id}"
 
     def columns = blast_columns ? "${blast_columns}" : ''
+    def exclude_taxon = taxid ? "--taxon-exclude ${taxid}" : ''
     def out_ext = ""
 
     if (outfmt == 0) {
@@ -65,12 +67,15 @@
     }
 
     """
+    mkdir -p ./blastp_tmp
+
     diamond \\
         blastp \\
         --threads ${task.cpus} \\
         --db ${db} \\
         --query ${fasta} \\
         --outfmt ${outfmt} ${columns} \\
+        ${exclude_taxon} \\
         ${args} \\
         --out ${prefix}.${out_ext}
 

'modules/nf-core/diamond/blastp/tests/main.nf.test.snap' is unchanged
'modules/nf-core/diamond/blastp/tests/nextflow.config' is unchanged
'modules/nf-core/diamond/blastp/tests/main.nf.test' is unchanged
************************************************************
