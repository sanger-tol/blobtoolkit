Changes in component 'nf-core/diamond/blastx'
'modules/nf-core/diamond/blastx/environment.yml' is unchanged
'modules/nf-core/diamond/blastx/meta.yml' is unchanged
Changes in 'diamond/blastx/main.nf':
--- modules/nf-core/diamond/blastx/main.nf
+++ modules/nf-core/diamond/blastx/main.nf
@@ -12,6 +12,7 @@
     tuple val(meta2), path(db)
     val out_ext
     val blast_columns
+    val taxid
 
     output:
     tuple val(meta), path('*.blast'), optional: true, emit: blast
@@ -33,6 +34,7 @@
     def is_compressed = fasta.getExtension() == "gz" ? true : false
     def fasta_name = is_compressed ? fasta.getBaseName() : fasta
     def columns = blast_columns ? "${blast_columns}" : ''
+    def exclude_taxon = taxid ? "--taxon-exclude ${taxid}" : ''
     if (out_ext == 'blast') {
         outfmt = 0
     }
@@ -64,6 +66,8 @@
         gzip -c -d ${fasta} > ${fasta_name}
     fi
 
+    mkdir -p ./blastx_tmp
+
     DB=`find -L ./ -name "*.dmnd" | sed 's/\\.dmnd\$//'`
 
     diamond \\
@@ -72,6 +76,7 @@
         --db \$DB \\
         --query ${fasta_name} \\
         --outfmt ${outfmt} ${columns} \\
+        ${exclude_taxon} \\
         ${args} \\
         --out ${prefix}.${out_ext} \\
         --log

'modules/nf-core/diamond/blastx/tests/main.nf.test.snap' is unchanged
'modules/nf-core/diamond/blastx/tests/main.nf.test' is unchanged
************************************************************
